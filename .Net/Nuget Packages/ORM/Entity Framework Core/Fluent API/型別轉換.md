# 型別轉換

### Enum 繼承的型別 與 DB 的型別一樣

- 其實型別還是可以視為一樣

```cs
public enum Season : Int16
{
    Spring,
    Summer,
    Autumn,
    Winter
}

public partial class TestEnum
{
    public int     Id     { get; set; }
    public Season  Season { get; set; }
    public string? Name   { get; set; }
}

partial void OnModelCreatingPartial(ModelBuilder modelBuilder)
{
    modelBuilder.Entity<TestEnum>(entity =>
                                    {
                                        entity.ToTable("TestEnum");

                                        // Property 型別跟資料庫一樣，就不用加下面這行
                                        // entity.Property(e => e.Season)
                                            // .HasConversion(v => v, v => v);
                                    });
}
```

### Enum 繼承的型別 與 DB 的型別不一樣

- Season 的資料庫型別為 smallint
- HasConversion 
  - 第一個參數是轉換成資料庫的型別
  - 第二個參數是轉換成 Entity 的型別
  - 這個會跟 scaffold context 干擾，干擾的意思是指執行 scaffold context 會
    - 把 HasConversion 的設定覆蓋掉
    - Entity Model 的型別會變成一致 (轉換的型別會被蓋掉)


```cs
public partial class TestEnum
{
    public int     Id     { get; set; }
    public string  Season { get; set; }
    public string? Name   { get; set; }
}

partial void OnModelCreatingPartial(ModelBuilder modelBuilder)
{
    modelBuilder.Entity<TestEnum>(entity =>
                                    {
                                        entity.ToTable("TestEnum");

                                        // Property 型別跟資料庫不一樣，就要用加下面這行
                                          entity.Property(e => e.Season)
                                                .HasConversion(v => Int16.Parse(v),
                                                               v => v.ToString());
                                    });
}
```